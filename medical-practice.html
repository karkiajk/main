<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dr. Simmons Medical Practice Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            .print\\:hidden {
                display: none !important;
            }
            body {
                background: white;
            }
            #app > div:not(.receipt-modal) {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="app"></div>

    <script>
        // State management
        let state = {
            currentUser: null,
            sidebarOpen: true,
            activeView: 'dashboard',
            showReceipt: false,
            selectedPatient: null
        };

        // Sample data
        const patients = [
            { id: 1, name: 'John Smith', dob: '1975-03-15', lastVisit: '2024-01-10', nextAppt: '2024-01-20 10:00 AM', doctor: 'Dr. Chen', phone: '0412 345 678', medicare: '2123 45678 9', address: '123 Main St, Sydney NSW 2000' },
            { id: 2, name: 'Mary Johnson', dob: '1982-07-22', lastVisit: '2024-01-12', nextAppt: '2024-01-18 2:00 PM', doctor: 'Dr. Simmons', phone: '0423 456 789', medicare: '3234 56789 0', address: '45 Park Ave, Sydney NSW 2000' },
            { id: 3, name: 'Robert Williams', dob: '1968-11-30', lastVisit: '2024-01-08', nextAppt: '2024-01-22 9:30 AM', doctor: 'Dr. Patel', phone: '0434 567 890', medicare: '4345 67890 1', address: '78 Queen St, Sydney NSW 2000' }
        ];

        const appointments = [
            { id: 1, patient: 'John Smith', doctor: 'Dr. Chen', time: '10:00 AM', date: '2024-01-20', status: 'Confirmed', reminder: 'Sent' },
            { id: 2, patient: 'Mary Johnson', doctor: 'Dr. Simmons', time: '2:00 PM', date: '2024-01-18', status: 'Pending', reminder: 'Pending' },
            { id: 3, patient: 'Sarah Davis', doctor: 'Dr. Patel', time: '11:30 AM', date: '2024-01-19', status: 'Confirmed', reminder: 'Sent' }
        ];

        const equipment = [
            { id: 1, name: 'X-Ray Machine', company: 'MedEquip Ltd', leaseEnd: '2024-06-30', monthlyCost: 2500, status: 'Active' },
            { id: 2, name: 'Ultrasound Scanner', company: 'Healthcare Tech', leaseEnd: '2024-09-15', monthlyCost: 1800, status: 'Active' },
            { id: 3, name: 'ECG Monitor', company: 'CardioTech', leaseEnd: '2024-03-20', status: 'Expiring Soon', monthlyCost: 950 }
        ];

        const staff = [
            { id: 1, name: 'Dr. Simmons', role: 'Owner/GP', schedule: 'Mon-Fri', status: 'Active' },
            { id: 2, name: 'Dr. Chen', role: 'GP', schedule: 'Mon-Fri', status: 'Active' },
            { id: 3, name: 'Dr. Patel', role: 'GP', schedule: 'Mon-Fri', status: 'Active' },
            { id: 4, name: 'Dr. Martinez (Skin Specialist)', role: 'Visiting Specialist', schedule: 'Wednesdays', status: 'Active' },
            { id: 5, name: 'Jennifer (Mrs. Simmons)', role: 'Nurse/Partner', schedule: '8hrs/week', status: 'Active' },
            { id: 6, name: 'Emma Wilson', role: 'Receptionist (F/T)', schedule: 'Mon-Fri', status: 'Active' },
            { id: 7, name: 'Tom Brown', role: 'Receptionist (P/T)', schedule: 'Mon, Wed, Fri', status: 'Active' },
            { id: 8, name: 'Sarah Lee', role: 'Nurse (F/T)', schedule: 'Mon-Fri', status: 'Active' },
            { id: 9, name: 'Michael Green', role: 'Nurse (P/T)', schedule: 'Tue, Thu', status: 'Active' }
        ];

        const reimbursements = [
            { id: 1, doctor: 'Dr. Chen', item: 'Printer Paper & Toner', amount: 145, date: '2024-01-12', status: 'Pending' },
            { id: 2, doctor: 'Dr. Patel', item: 'Medical Consumables', amount: 320, date: '2024-01-10', status: 'Approved' },
            { id: 3, doctor: 'Dr. Martinez', item: 'Room Rental - Jan Week 2', amount: 500, date: '2024-01-11', status: 'Paid' }
        ];

        // SVG Icons as functions
        const icons = {
            calendar: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>',
            users: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>',
            fileText: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>',
            settings: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M12 1v6m0 6v6m5.196-13.196l-4.242 4.242m-4.242 4.242l-4.242 4.242m13.196 0l-4.242-4.242m-4.242-4.242L2.804 2.804"></path></svg>',
            alertCircle: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>',
            dollarSign: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>',
            wrench: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg>',
            bell: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>',
            logOut: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>',
            menu: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>',
            x: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',
            receipt: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1z"></path><path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"></path><path d="M12 17.5v-11"></path></svg>',
            printer: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>'
        };

        // Component: Login Screen
        function renderLogin() {
            return `
                <div class="min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 flex items-center justify-center p-4">
                    <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-md">
                        <div class="text-center mb-8">
                            <div class="bg-blue-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                                ${icons.fileText}
                            </div>
                            <h1 class="text-2xl font-bold text-gray-800">Dr. Simmons Medical Practice</h1>
                            <p class="text-gray-600 mt-2">Select your role to continue</p>
                        </div>
                        
                        <div class="space-y-3">
                            <button onclick="setUser('admin')" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition flex items-center justify-center gap-2">
                                ${icons.settings}
                                Admin Login (Dr. Simmons)
                            </button>
                            
                            <button onclick="setUser('doctor')" class="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition flex items-center justify-center gap-2">
                                ${icons.users}
                                Doctor Login
                            </button>
                            
                            <button onclick="setUser('staff')" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition flex items-center justify-center gap-2">
                                ${icons.fileText}
                                Staff Login
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Component: Patient Receipt
        function renderReceipt(patient) {
            const receiptDate = new Date().toLocaleDateString('en-AU');
            const receiptTime = new Date().toLocaleTimeString('en-AU', { hour: '2-digit', minute: '2-digit' });
            
            return `
                <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 receipt-modal">
                    <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto">
                        <div class="p-6 space-y-6">
                            <!-- Header -->
                            <div class="border-b-2 border-gray-800 pb-4">
                                <h1 class="text-2xl font-bold text-gray-800">Dr. Simmons Medical Practice</h1>
                                <p class="text-sm text-gray-600">ABC Partners</p>
                                <p class="text-sm text-gray-600">123 Medical Centre Drive, Sydney NSW 2000</p>
                                <p class="text-sm text-gray-600">Phone: (02) 9123 4567 | Fax: (02) 9123 4568</p>
                                <p class="text-sm text-gray-600">ABN: 12 345 678 901</p>
                            </div>

                            <!-- Receipt Title -->
                            <div class="text-center">
                                <h2 class="text-xl font-bold text-gray-800">PATIENT RECEIPT</h2>
                                <p class="text-sm text-gray-600">Tax Invoice / Receipt</p>
                            </div>

                            <!-- Receipt Details -->
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div>
                                    <p class="font-semibold text-gray-700">Receipt Number:</p>
                                    <p class="text-gray-600">RCP-${patient.id}-${Date.now()}</p>
                                </div>
                                <div>
                                    <p class="font-semibold text-gray-700">Date & Time:</p>
                                    <p class="text-gray-600">${receiptDate} ${receiptTime}</p>
                                </div>
                            </div>

                            <!-- Patient Details -->
                            <div class="border border-gray-300 rounded p-4 bg-gray-50">
                                <h3 class="font-semibold text-gray-800 mb-3">Patient Details</h3>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Name:</span>
                                        <span class="font-medium text-gray-800">${patient.name}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Date of Birth:</span>
                                        <span class="font-medium text-gray-800">${patient.dob}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Medicare Number:</span>
                                        <span class="font-medium text-gray-800">${patient.medicare}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Address:</span>
                                        <span class="font-medium text-gray-800 text-right">${patient.address}</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Service Details -->
                            <div class="border border-gray-300 rounded p-4">
                                <h3 class="font-semibold text-gray-800 mb-3">Service Details</h3>
                                <table class="w-full text-sm">
                                    <thead class="border-b border-gray-300">
                                        <tr>
                                            <th class="text-left py-2 text-gray-700">Description</th>
                                            <th class="text-left py-2 text-gray-700">Provider</th>
                                            <th class="text-right py-2 text-gray-700">Item No.</th>
                                            <th class="text-right py-2 text-gray-700">Fee</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="border-b border-gray-200">
                                            <td class="py-3 text-gray-800">Standard Consultation</td>
                                            <td class="py-3 text-gray-800">${patient.doctor}</td>
                                            <td class="text-right py-3 text-gray-800">23</td>
                                            <td class="text-right py-3 text-gray-800">$85.00</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Billing Summary -->
                            <div class="border border-gray-300 rounded p-4 bg-blue-50">
                                <h3 class="font-semibold text-gray-800 mb-3">Billing Summary</h3>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-700">Total Fee:</span>
                                        <span class="font-medium text-gray-800">$85.00</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-700">Medicare Benefit:</span>
                                        <span class="font-medium text-green-600">$85.00</span>
                                    </div>
                                    <div class="flex justify-between border-t-2 border-gray-400 pt-2 mt-2">
                                        <span class="font-bold text-gray-800">Amount Due:</span>
                                        <span class="font-bold text-gray-800">$0.00</span>
                                    </div>
                                </div>
                                <div class="mt-3 p-2 bg-green-100 border border-green-300 rounded">
                                    <p class="text-sm text-green-800 font-medium">✓ BULK BILLED - No payment required</p>
                                    <p class="text-xs text-green-700 mt-1">This service has been bulk billed directly to Medicare on your behalf</p>
                                </div>
                            </div>

                            <!-- Footer Notes -->
                            <div class="text-xs text-gray-600 space-y-1 border-t pt-4">
                                <p>• This receipt is issued in accordance with Medicare requirements</p>
                                <p>• Medicare claim submitted electronically on ${receiptDate}</p>
                                <p>• For billing inquiries, please contact our reception on (02) 9123 4567</p>
                                <p class="font-semibold mt-2">Thank you for choosing Dr. Simmons Medical Practice</p>
                            </div>

                            <!-- Action Buttons -->
                            <div class="flex gap-3 pt-4 border-t print:hidden">
                                <button onclick="window.print()" class="flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition flex items-center justify-center gap-2">
                                    ${icons.printer}
                                    Print Receipt
                                </button>
                                <button onclick="closeReceipt()" class="flex-1 bg-gray-600 text-white py-3 rounded-lg hover:bg-gray-700 transition">
                                    Close
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Component: Admin Dashboard
        function renderAdminDashboard() {
            return `
                <div class="space-y-6">
                    <h2 class="text-2xl font-bold text-gray-800">Admin Dashboard</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Total Staff</p>
                                    <p class="text-2xl font-bold text-blue-600">9</p>
                                </div>
                                <div class="text-blue-600">${icons.users}</div>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Today's Appointments</p>
                                    <p class="text-2xl font-bold text-green-600">24</p>
                                </div>
                                <div class="text-green-600">${icons.calendar}</div>
                            </div>
                        </div>
                        
                        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Pending Reimbursements</p>
                                    <p class="text-2xl font-bold text-yellow-600">$465</p>
                                </div>
                                <div class="text-yellow-600">${icons.dollarSign}</div>
                            </div>
                        </div>
                        
                        <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">IT Contract Expires</p>
                                    <p class="text-2xl font-bold text-red-600">30 days</p>
                                </div>
                                <div class="text-red-600">${icons.alertCircle}</div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                        <div class="flex items-start gap-3">
                            <div class="text-red-600 flex-shrink-0 mt-1">${icons.alertCircle}</div>
                            <div>
                                <h3 class="font-semibold text-red-800 mb-2">Critical Alerts</h3>
                                <ul class="space-y-1 text-sm text-red-700">
                                    <li>• IT Support Contract expires in 30 days - Review needed</li>
                                    <li>• ECG Monitor lease expiring March 20 - Renewal required</li>
                                    <li>• Network reliability issues reported by Dr. Chen</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg border border-gray-200 p-4">
                            <h3 class="font-semibold text-gray-800 mb-4">Equipment Leases</h3>
                            <div class="space-y-3">
                                ${equipment.map(item => `
                                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-800">${item.name}</p>
                                            <p class="text-sm text-gray-600">${item.company} • $${item.monthlyCost}/mo</p>
                                            <p class="text-xs text-gray-500">Expires: ${item.leaseEnd}</p>
                                        </div>
                                        <span class="px-2 py-1 rounded text-xs ${item.status === 'Expiring Soon' ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}">
                                            ${item.status}
                                        </span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <div class="bg-white rounded-lg border border-gray-200 p-4">
                            <h3 class="font-semibold text-gray-800 mb-4">Pending Reimbursements</h3>
                            <div class="space-y-3">
                                ${reimbursements.map(item => `
                                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-800">${item.doctor}</p>
                                            <p class="text-sm text-gray-600">${item.item}</p>
                                            <p class="text-xs text-gray-500">${item.date}</p>
                                        </div>
                                        <div class="text-right">
                                            <p class="font-semibold text-gray-800">$${item.amount}</p>
                                            <span class="px-2 py-1 rounded text-xs ${
                                                item.status === 'Pending' ? 'bg-yellow-100 text-yellow-700' :
                                                item.status === 'Approved' ? 'bg-blue-100 text-blue-700' :
                                                'bg-green-100 text-green-700'
                                            }">
                                                ${item.status}
                                            </span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Component: Doctor Dashboard
        function renderDoctorDashboard() {
            return `
                <div class="space-y-6">
                    <h2 class="text-2xl font-bold text-gray-800">Doctor Portal</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Today's Patients</p>
                                    <p class="text-2xl font-bold text-blue-600">8</p>
                                </div>
                                <div class="text-blue-600">${icons.users}</div>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Upcoming Appointments</p>
                                    <p class="text-2xl font-bold text-green-600">12</p>
                                </div>
                                <div class="text-green-600">${icons.calendar}</div>
                            </div>
                        </div>
                        
                        <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Pending Reviews</p>
                                    <p class="text-2xl font-bold text-purple-600">5</p>
                                </div>
                                <div class="text-purple-600">${icons.fileText}</div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg border border-gray-200 p-4">
                        <h3 class="font-semibold text-gray-800 mb-4">My Patients</h3>
                        <div class="space-y-3">
                            ${patients.map(patient => `
                                <div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                                    <div class="flex items-center justify-between">
                                        <div class="flex-1">
                                            <p class="font-semibold text-gray-800">${patient.name}</p>
                                            <p class="text-sm text-gray-600">DOB: ${patient.dob} • Last Visit: ${patient.lastVisit}</p>
                                            <p class="text-sm text-blue-600 mt-1">Next Appointment: ${patient.nextAppt}</p>
                                        </div>
                                        <div class="flex gap-2">
                                            <button onclick="showReceipt(${patient.id})" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition flex items-center gap-2">
                                                <span style="width: 16px; height: 16px;">${icons.receipt}</span>
                                                Receipt
                                            </button>
                                            <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">
                                                View Records
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        // Component: Staff Dashboard
        function renderStaffDashboard() {
            return `
                <div class="space-y-6">
                    <h2 class="text-2xl font-bold text-gray-800">Staff Portal</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Today's Appointments</p>
                                    <p class="text-2xl font-bold text-blue-600">24</p>
                                </div>
                                <div class="text-blue-600">${icons.calendar}</div>
                            </div>
                        </div>
                        
                        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Reminders to Send</p>
                                    <p class="text-2xl font-bold text-yellow-600">8</p>
                                </div>
                                <div class="text-yellow-600">${icons.bell}</div>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Checked In</p>
                                    <p class="text-2xl font-bold text-green-600">6</p>
                                </div>
                                <div class="text-green-600">${icons.users}</div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg border border-gray-200 p-4">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-semibold text-gray-800">Appointment Schedule</h3>
                            <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">
                                + New Appointment
                            </button>
                        </div>
                        <div class="space-y-3">
                            ${appointments.map(appt => {
                                const patient = patients.find(p => p.name === appt.patient);
                                return `
                                    <div class="p-4 bg-gray-50 rounded-lg">
                                        <div class="flex items-center justify-between">
                                            <div class="flex-1">
                                                <p class="font-semibold text-gray-800">${appt.patient}</p>
                                                <p class="text-sm text-gray-600">${appt.doctor} • ${appt.date} at ${appt.time}</p>
                                                <div class="flex gap-2 mt-2">
                                                    <span class="px-2 py-1 rounded text-xs ${appt.status === 'Confirmed' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700'}">
                                                        ${appt.status}
                                                    </span>
                                                    <span class="px-2 py-1 rounded text-xs ${appt.reminder === 'Sent' ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-700'}">
                                                        SMS: ${appt.reminder}
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="flex gap-2">
                                                <button class="px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition">
                                                    Check In
                                                </button>
                                                <button class="px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition">
                                                    Send Reminder
                                                </button>
                                                ${patient ? `
                                                    <button onclick="showReceipt(${patient.id})" class="px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 transition flex items-center gap-1">
                                                        <span style="width: 14px; height: 14px;">${icons.receipt}</span>
                                                        Receipt
                                                    </button>
                                                ` : ''}
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        // Component: Sidebar
        function renderSidebar() {
            const menuItems = state.currentUser === 'admin' ? [
                { id: 'dashboard', icon: 'fileText', label: 'Dashboard' },
                { id: 'staff', icon: 'users', label: 'Staff Management' },
                { id: 'equipment', icon: 'wrench', label: 'Equipment & Leases' },
                { id: 'reimbursements', icon: 'dollarSign', label: 'Reimbursements' },
                { id: 'settings', icon: 'settings', label: 'System Settings' }
            ] : state.currentUser === 'doctor' ? [
                { id: 'dashboard', icon: 'fileText', label: 'Dashboard' },
                { id: 'patients', icon: 'users', label: 'My Patients' },
                { id: 'appointments', icon: 'calendar', label: 'Appointments' },
                { id: 'billing', icon: 'dollarSign', label: 'Billing' }
            ] : [
                { id: 'dashboard', icon: 'fileText', label: 'Dashboard' },
                { id: 'appointments', icon: 'calendar', label: 'Appointments' },
                { id: 'patients', icon: 'users', label: 'Patient Check-in' },
                { id: 'reminders', icon: 'bell', label: 'Send Reminders' }
            ];

            return `
                <div class="${state.sidebarOpen ? 'w-64' : 'w-20'} bg-gray-800 text-white transition-all duration-300 flex flex-col">
                    <div class="p-4 border-b border-gray-700 flex items-center justify-between">
                        ${state.sidebarOpen ? '<h1 class="font-bold text-lg">Medical Practice</h1>' : ''}
                        <button onclick="toggleSidebar()" class="p-2 hover:bg-gray-700 rounded">
                            ${state.sidebarOpen ? icons.x : icons.menu}
                        </button>
                    </div>
                    
                    <nav class="flex-1 p-4 space-y-2">
                        ${menuItems.map(item => `
                            <button onclick="setView('${item.id}')" class="w-full flex items-center gap-3 p-3 rounded hover:bg-gray-700 transition ${state.activeView === item.id ? 'bg-gray-700' : ''}">
                                ${icons[item.icon]}
                                ${state.sidebarOpen ? `<span>${item.label}</span>` : ''}
                            </button>
                        `).join('')}
                    </nav>

                    <div class="p-4 border-t border-gray-700">
                        <button onclick="logout()" class="w-full flex items-center gap-3 p-3 rounded hover:bg-gray-700 transition text-red-400">
                            ${icons.logOut}
                            ${state.sidebarOpen ? '<span>Logout</span>' : ''}
                        </button>
                    </div>
                </div>
            `;
        }

        // Component: Main App
        function renderApp() {
            let mainContent = '';
            
            if (state.activeView === 'dashboard') {
                if (state.currentUser === 'admin') {
                    mainContent = renderAdminDashboard();
                } else if (state.currentUser === 'doctor') {
                    mainContent = renderDoctorDashboard();
                } else {
                    mainContent = renderStaffDashboard();
                }
            } else {
                mainContent = `
                    <div class="bg-white rounded-lg border border-gray-200 p-8 text-center">
                        <p class="text-gray-600">This view is under development. Coming soon!</p>
                    </div>
                `;
            }

            return `
                <div class="flex h-screen bg-gray-100">
                    ${renderSidebar()}
                    <div class="flex-1 overflow-auto p-6">
                        ${mainContent}
                    </div>
                </div>
                ${state.showReceipt && state.selectedPatient ? renderReceipt(state.selectedPatient) : ''}
            `;
        }

        // Event handlers
        function setUser(role) {
            state.currentUser = role;
            state.activeView = 'dashboard';
            render();
        }

        function logout() {
            state.currentUser = null;
            state.activeView = 'dashboard';
            state.showReceipt = false;
            state.selectedPatient = null;
            render();
        }

        function toggleSidebar() {
            state.sidebarOpen = !state.sidebarOpen;
            render();
        }

        function setView(view) {
            state.activeView = view;
            render();
        }

        function showReceipt(patientId) {
            const patient = patients.find(p => p.id === patientId);
            if (patient) {
                state.selectedPatient = patient;
                state.showReceipt = true;
                render();
            }
        }

        function closeReceipt() {
            state.showReceipt = false;
            state.selectedPatient = null;
            render();
        }

        // Main render function
        function render() {
            const app = document.getElementById('app');
            if (!state.currentUser) {
                app.innerHTML = renderLogin();
            } else {
                app.innerHTML = renderApp();
            }
        }

        // Initialize app
        render();
    </script>
</body>
</html>